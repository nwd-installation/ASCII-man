<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Word Guess Or Else</title>
	
<!--	<link rel="stylesheet" href="./assets/css/reset.css"> -->
		<link href="https://fonts.googleapis.com/css?family=VT323" rel="stylesheet">
		<link rel="stylesheet" href="./assets/style.css"> 
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
<header></header>

	<div>
		<p id="directions-text">Press a letter to fill in the word below.</p>
		<p>Wins: <span id ="wins-text"></span></p>
		<p>Number of Guesses Remaining: <span id="guesses-left"></span></p>
		<p>Letters Already Guessed: <span id="letters-guessed"></span></p>
		<p>Current Word:<br /><span id="current-word"></span></p>
		<p>Hint: <span id="hint"></span></p>
	</div>
	
	<script type="text/javascript">
  
var textElements = {
	directionsText : document.getElementById("directions-text"),
	winsText : document.getElementById("wins-text"),
	guessesLeftText : document.getElementById("guesses-left"),
	lettersGuessedText : document.getElementById("letters-guessed"),
	currentWordText : document.getElementById("current-word"),
	hintText : document.getElementById("hint")
};  
	
var game = {
	
	words : [ // may want to create hint words as well
		"misanthrope",
		"meander",
		"lycanthropy",
		"vertigo",
		"chillblains",
		"homonculous",
		"wendigo",
		"datura",
		"mitre",
		"scramples"
	],
	
	hints : [
		"doesn't play well with others",
		"rivers do this",
		"werewolf syndrome",
		"an inner-ear condition and a classic Hitchcock thriller",
		"I don't know what this is",
		"latin for \"little man\"",
		"a mythical native American cannibal beast",
		"a hallucinagenic fruit",
		"pope hat",
		"not a real word"
		],
	
	currentWordIndex : 0,
	guessesRemaining : 5,
	wins : 0,
	lettersGuessed : [],
	currentWord : "",
	revealedWordArray : [],
	over : false,
	
	initializeValues : function() {
		this.guessesRemaining = 5; textElements.guessesLeftText.textContent = this.guessesRemaining;
		textElements.winsText.textContent = this.wins ;
		this.lettersGuessed = []; textElements.lettersGuessedText.textContent = "none";
		this.randomizeCurrentWord();
		for (this.revealedWordArray = []; this.revealedWordArray.length < this.currentWord.length ; this.revealedWordArray.push('_')) {} ;
		this.updateDisplayedRevealedWord();
	},
	
	updateRevealedWordArray : function(x, y) {
	this.revealedWordArray[x] = y;
	},
	
	updateDisplayedRevealedWord : function () {
		document.getElementById("current-word").innerHTML = "";
		for (var i = 0; i < this.revealedWordArray.length; i++) {
		document.getElementById("current-word").innerHTML += "<span class=\"letterbox\">";
			document.getElementById("current-word").innerHTML += this.revealedWordArray[i];
			document.getElementById("current-word").innerHTML += "</span>";
		}
	/*
		textElements.currentWordText.textContent = "";
		for (var i = 0; i < this.revealedWordArray.length; i++)
		{
			/* textElements.currentWordText.textContent += " ";
			textElements.currentWordText.textContent += game.revealedWordArray[i];
		} */
	},
	
	randomizeCurrentWord : function() {
		var index = Math.floor(Math.random() * this.words.length);
		this.currentWord = this.words[index];
		textElements.hintText.textContent = this.hints[index] ;	}
	
};
	
	function getAllIndexes(arr, val) {
    var indexes = [];	
    for(var i = 0; i < arr.length; i++) {
        if (arr[i] === val) { indexes.push(i); }
	}
	return indexes;
}


	game.initializeValues();
	document.onkeyup = function(event) {
	if (game.over) return; // end game
	var userGuess = event.key.toLowerCase(); // Determines which key was pressed.
	
	if ("abcdefghijklmnopqrstuvwxyz".includes(userGuess)) {  //then the keypress was a letter
		if (!game.lettersGuessed.includes(userGuess) && !game.revealedWordArray.includes(userGuess)) //userGuess isn't in either lettersGuessed or revealedWordArray
			{
				var ind = getAllIndexes(game.currentWord, userGuess) ; //check if userguess is in the current word
				if (ind.length != 0) {  //then it is in current word
					for (var x = 0; x < ind.length; x++) {
						game.updateRevealedWordArray(ind[x], userGuess);
					}
					game.updateDisplayedRevealedWord();
					if (!game.revealedWordArray.includes('_')) {
						game.wins++;
						textElements.directionsText.textContent = "Congratulations! Can you guess this one?";
						game.initializeValues();
					}
				}
				else {
					game.lettersGuessed.push(userGuess); //add userGuess to letters guessed
					textElements.lettersGuessedText.textContent = game.lettersGuessed;
					game.guessesRemaining--; //reduce guessesRemaining by one 
					textElements.guessesLeftText.textContent = game.guessesRemaining;
					if (game.guessesRemaining < 1) {
						textElements.directionsText.textContent = "Game Over. Thanks for playing!";
					game.over = true; //end game
					}
				}
			}
	}
}

  
  </script>  
</body>
</html>