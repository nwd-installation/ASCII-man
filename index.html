<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Word Guess Or Else</title>
	
<!--	<link rel="stylesheet" href="./assets/css/reset.css">
		<link rel="stylesheet" href="./assets/css/style.css"> -->
</head>
<body>
	<div>
		<p id="directions-text">Press any key to get started!</p>
		<p>Wins: <span id ="wins-text"></span></p>
		<p>Number of Guesses Remaining: <span id="guesses-left"></span></p>
		<p>Letters Already Guessed: <span id="letters-guessed"></span></p>
		<p>Current Word Text: <span style="letter-spacing:absolute;" id="current-word"></span></p>
	</div>
	
	<script type="text/javascript">
  
var textElements = {
	directionsText : document.getElementById("directions-text"),
	winsText : document.getElementById("wins-text"),
	guessesLeftText : document.getElementById("guesses-left"),
	lettersGuessedText : document.getElementById("letters-guessed"),
	currentWordText : document.getElementById("current-word"),
};  
	
var game = {
	
	words : [
		"misanthrope",
		"meander",
		"lycanthropy",
		"vertigo",
		"chillblains",
		"homonculous",
		"wendigo",
		"datura",
		"mitre",
		"scramples"
	],
	
	currentWordIndex : 0,
	guessesRemaining : 5,
	wins : 0,
	lettersGuessed : [],
	currentWord : "",
	revealedWord : "",
	
	initializeValues : function() {
		this.guessesRemaining = 5; textElements.guessesLeftText.textContent = this.guessesRemaining;
		this.wins = 0; textElements.winsText.textContent = this.wins ;
		this.lettersGuessed = []; textElements.lettersGuessedText.textContent = "none";
		this.currentWord = this.words[this.currentWordIndex];
		for (this.revealedWord = ""; this.revealedWord.length < this.currentWord.length ; this.revealedWord += '_') {textElements.currentWordText.textContent = this.revealedWord;} ;
	}
	
};
	
	function getAllIndexes(arr, val) {
    var indexes = [];	
    for(var i = 0; i < arr.length; i++) {
        if (arr[i] === val) { indexes.push(i); }
	}
	return indexes;
}


	game.initializeValues();
	document.onkeyup = function(event) {
	if (game.guessesRemaining < 1) { return; } //put a message here like GAME OVER
	
	// Determines which key was pressed.
	var userGuess = event.key.toLowerCase();
	
	if ("abcdefghijklmnopqrstuvwxyz".includes(userGuess)) {
		if (!game.lettersGuessed.includes(userGuess)) //userGuess not in lettersGuessed
			{
				game.lettersGuessed.push(userGuess); //add userGuess to letters guessed
				textElements.lettersGuessedText.textContent = game.lettersGuessed;
				if (game.currentWord.includes(userGuess)) { //check if userguess is in the current word
					var ind = getAllIndexes(game.currentWord, userGuess) ;
					for (var x = 0; x < ind.length; x++) {
						var newstr = game.revealedWord.substr(0,ind[x]) + userGuess + game.revealedWord.substr(ind[x]+1,game.revealedWord.length-1);
						game.revealedWord = newstr;
					}
					textElements.currentWordText.textContent = game.revealedWord;
					if (game.revealedWord === game.currentWord) { 
						if (game.currentWordIndex === game.words.length - 1) {game.currentWordIndex = 0; }
						else {game.currentWordIndex++; }
						game.initializeValues();
					}
				}
				else { //else, reduce guessesRemaining by one 
					game.guessesRemaining--; 
					textElements.guessesLeftText.textContent = game.guessesRemaining;
				}
			}
	}
}

  
  </script>  
</body>
</html>
</html>